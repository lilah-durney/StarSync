{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { getAuth, GoogleAuthProvider, EmailAuthProvider, onAuthStateChanged } from \"firebase/auth\";\nimport firebase from \"firebase/compat/app\";\nimport * as firebaseui from \"firebaseui\";\nimport \"firebaseui/dist/firebaseui.css\";\nimport { app } from \"../../firebase/firebase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { auth, db } from \"../../firebase/firebase\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\nfunction Login() {\n  _s();\n  const {\n    userLoggedIn\n  } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isSigningIn, setIsSigningIn] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n}\n\n// function Login() {\n//     const navigate = useNavigate();\n\n//     useEffect(() => {\n//         // Initialize FirebaseUI Auth instance\n//         const ui = firebaseui.auth.AuthUI.getInstance() || new firebaseui.auth.AuthUI(getAuth(app));\n//         ui.start(\"#firebaseui-auth-container\", {\n//             signInOptions: [\n//                 {\n//                     provider: GoogleAuthProvider.PROVIDER_ID,\n//                     customParameters: { prompt: \"select_account\" },\n//                 },\n//                 { provider: EmailAuthProvider.PROVIDER_ID },\n//             ],\n//             signInSuccessUrl: \"/inputprofile\", // Default URL on sign-in success\n//         });\n\n//         console.log(\"Setting up onAuthStateChanged listener...\");\n\n//         // Listen to authentication state changes\n//         const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//             if (!user) {\n//                 console.log(\"User is logged in:\", user);\n//                 navigate(\"/login\")\n//             }\n//         });\n\n//         // Cleanup on component unmount\n//         return () => {\n//             unsubscribe();\n\n//         };\n//     }, [navigate]);\n\n//     return <div id=\"firebaseui-auth-container\"></div>;\n// }\n\n// export default Login;\n\n// try {\n//     // Reference the user document in Firestore\n//     const userRef = doc(db, \"users\", user.uid);\n//     const docSnap = await getDoc(userRef);\n\n//     if (!docSnap.exists()) {\n//         console.log(\"New user detected. Creating user document...\");\n//         await setDoc(userRef, {\n//             uid: user.uid,\n//             email: user.email,\n//             profileComplete: false,\n//             createdAt: new Date(),\n//         });\n//         navigate(\"/inputprofile\");\n//     } else if (docSnap.data().profileComplete) {\n//         console.log(\"Profile is complete. Redirecting to home...\");\n//         navigate(\"/home\");\n//     } else {\n//         console.log(\"Profile incomplete. Redirecting to profile input...\");\n//         navigate(\"/inputprofile\");\n//     }\n// } catch (error) {\n//     console.error(\"Error handling user login:\", error);\n// }\n// } else {\n//     console.log(\"No user logged in. Redirecting to login...\");\n//     navigate(\"/login\");\n// }\n_s(Login, \"d729Ed2ze8dSUU8o8uLaVr3kSMw=\", true);\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useEffect","useState","getAuth","GoogleAuthProvider","EmailAuthProvider","onAuthStateChanged","firebase","firebaseui","app","useNavigate","auth","db","doc","setDoc","getDoc","Login","_s","userLoggedIn","useAuth","email","setEmail","password","setPassword","isSigningIn","setIsSigningIn","errorMessage","setErrorMessage","_c","$RefreshReg$"],"sources":["/Users/lilahdurney/Desktop/StarSync/src/pages/login/login.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { getAuth, GoogleAuthProvider, EmailAuthProvider, onAuthStateChanged } from \"firebase/auth\";\nimport firebase from \"firebase/compat/app\";\nimport * as firebaseui from \"firebaseui\";\nimport \"firebaseui/dist/firebaseui.css\";\nimport { app } from \"../../firebase/firebase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { auth, db } from \"../../firebase/firebase\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\n\n\nfunction Login() {\n    const { userLoggedIn } = useAuth();\n    \n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [isSigningIn, setIsSigningIn] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n\n\n}\n\n// function Login() {\n//     const navigate = useNavigate();\n\n//     useEffect(() => {\n//         // Initialize FirebaseUI Auth instance\n//         const ui = firebaseui.auth.AuthUI.getInstance() || new firebaseui.auth.AuthUI(getAuth(app));\n//         ui.start(\"#firebaseui-auth-container\", {\n//             signInOptions: [\n//                 {\n//                     provider: GoogleAuthProvider.PROVIDER_ID,\n//                     customParameters: { prompt: \"select_account\" },\n//                 },\n//                 { provider: EmailAuthProvider.PROVIDER_ID },\n//             ],\n//             signInSuccessUrl: \"/inputprofile\", // Default URL on sign-in success\n//         });\n\n//         console.log(\"Setting up onAuthStateChanged listener...\");\n\n//         // Listen to authentication state changes\n//         const unsubscribe = onAuthStateChanged(auth, async (user) => {\n//             if (!user) {\n//                 console.log(\"User is logged in:\", user);\n//                 navigate(\"/login\")\n//             }\n//         });\n\n//         // Cleanup on component unmount\n//         return () => {\n//             unsubscribe();\n            \n//         };\n//     }, [navigate]);\n\n//     return <div id=\"firebaseui-auth-container\"></div>;\n// }\n\n// export default Login;\n\n\n\n                // try {\n                //     // Reference the user document in Firestore\n                //     const userRef = doc(db, \"users\", user.uid);\n                //     const docSnap = await getDoc(userRef);\n\n                //     if (!docSnap.exists()) {\n                //         console.log(\"New user detected. Creating user document...\");\n                //         await setDoc(userRef, {\n                //             uid: user.uid,\n                //             email: user.email,\n                //             profileComplete: false,\n                //             createdAt: new Date(),\n                //         });\n                //         navigate(\"/inputprofile\");\n                //     } else if (docSnap.data().profileComplete) {\n                //         console.log(\"Profile is complete. Redirecting to home...\");\n                //         navigate(\"/home\");\n                //     } else {\n                //         console.log(\"Profile incomplete. Redirecting to profile input...\");\n                //         navigate(\"/inputprofile\");\n                //     }\n                // } catch (error) {\n                //     console.error(\"Error handling user login:\", error);\n                // }\n            // } else {\n            //     console.log(\"No user logged in. Redirecting to login...\");\n            //     navigate(\"/login\");\n            // }"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,OAAO,EAAEC,kBAAkB,EAAEC,iBAAiB,EAAEC,kBAAkB,QAAQ,eAAe;AAClG,OAAOC,QAAQ,MAAM,qBAAqB;AAC1C,OAAO,KAAKC,UAAU,MAAM,YAAY;AACxC,OAAO,gCAAgC;AACvC,SAASC,GAAG,QAAQ,yBAAyB;AAC7C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,IAAI,EAAEC,EAAE,QAAQ,yBAAyB;AAClD,SAASC,GAAG,EAAEC,MAAM,EAAEC,MAAM,QAAQ,oBAAoB;AAGxD,SAASC,KAAKA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM;IAAEC;EAAa,CAAC,GAAGC,OAAO,CAAC,CAAC;EAElC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACwB,YAAY,EAAEC,eAAe,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;AAGxD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAIgB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACJ;AACA;AACA;AACA;AAAAe,EAAA,CA/EHD,KAAK;AAAAY,EAAA,GAALZ,KAAK;AAAA,IAAAY,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}